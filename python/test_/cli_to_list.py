#!/usr/bin/env python
__author__ = '10183988'
import re

cli_str =\
"""+---------+------+--------+------------+-------------+------------------+----------+------------+------------------------------------------------+------------+------------+---------+----------+------------+
| RetCode | Rack | Drawer | DeviceType | DeviceIndex |     VerType      | FuncType | VersionNo  |                  PkgfileName                   |   PkgNo    |  MakeTime  | VerSort | Location |   Index    |
+---------+------+--------+------------+-------------+------------------+----------+------------+------------------------------------------------+------------+------------+---------+----------+------------+
|         |  1   |   1    |     3      |      2      | VER_TYPE_BOOTROM |    1     |  1.1.0.1   |                      N/A                       |    0x0     | 2015-10-10 |    2    |    0     | 4294967295 |
|         |  1   |   1    |     3      |      2      |   VER_TYPE_CPU   |    1     | 1.1.10.1.1 | TMC_P1012_32_R_CE_V01.01.10.1.1_1601050540.pkg | 0x110a1001 | 2016-01-05 |    1    |    0     | 4294967295 |
+---------+------+--------+------------+-------------+------------------+----------+------------+------------------------------------------------+------------+------------+---------+----------+------------+
"""
def cli_to_list(string):
    attr_lines = string.splitlines()[1]
    data_lines = string.splitlines()[3:-1]

    attr = re.split(' *\| *', attr_lines)[1:-1]
    data_list = []
    for data_line in data_lines:
        data = re.split(' *\| *', data_line)[1:-1]
        data_list.append(dict(zip(attr, data)))

    return data_list

print cli_to_list(cli_str)